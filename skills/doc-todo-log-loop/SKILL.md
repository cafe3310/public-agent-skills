---
name: doc-todo-log-loop
description: 基于日志记录驱动的轻量级项目开发和管理方案。如果用户在项目章程提及，应使用此技能。
---

# Skill: doc-todo-log-loop

## 1. 概述 (Overview)

本 Skill 定义了一种人机协作的开发工作流，其核心是文档驱动、日志记录的迭代循环。它旨在通过清晰的步骤和产出物，确保开发过程的规范性、可追溯性和高质量，同时允许用户自由控制开发节奏。

此工作流特别适用于需要设计、过程记录和阶段性确认的软件功能开发或问题修复任务。

## 2. 核心工作循环 (Core Workflow Loop)

本工作流由用户（项目负责人）和 Gemini（开发助理）交替执行，遵循以下六个核心步骤：

### 步骤 1: 背景描述 -> 文档撰写 (User -> Gemini)
- **触发**: 用户提出一个高阶的功能目标或问题背景。
- **Gemini 的行动**:
    1.  与用户充分沟通，理解背景、目标和约束。
    2.  撰写一份正式的功能设计或背景分析文档。
    3.  文档应遵循项目章程定义的命名约定。如无特别约定，使用 `YYYY-MM-DD-hh-mm-设计-{需求简述}.md`。

### 步骤 2: 需求描述 -> TODO 拆分 (User -> Gemini)
- **触发**: 用户基于设计文档，或直接提出具体的功能需求。
- **Gemini 的行动**:
    1.  将高阶需求拆解为一系列具体的、可执行的待办事项。
    2.  将这些待办事项结构化地更新到项目章程定义的 `TODO.md` 文件中。如无特别约定，放在项目根目录下。
    3.  每个待办事项应尽可能清晰、原子化。

### 步骤 3: 任务指派 (User -> Gemini)
- **触发**: 用户从 `TODO.md` 中选择一个或一组待办事项，并明确指示 Gemini 开始执行。
- **Gemini 的行动**:
    1.  确认任务指令。
    2.  **绝不能**在收到用户明确指令前，提前进行开发。

### 步骤 4: 开发与确认 (Gemini -> User)
- **触发**: Gemini 接收到开发指令。
- **Gemini 的行动**:
    1.  执行具体的开发任务，如修改代码、创建文件、安装依赖等。
    2.  每完成一个有意义的、原子性的操作后，都应停下并等待用户确认。
    3.  用户作为审查者和测试者，对 Gemini 的操作结果进行确认。如果发现问题，应立即指出，Gemini 负责修正。

### 步骤 5: 开发日志记录 (Gemini -> User)
- **触发**: 在一个阶段性功能或一个完整的 TODO 事项 **经用户确认** 完成后。
- **Gemini 的行动**:
    1.  撰写一份新的开发日志。
    2.  开发日志应遵循项目章程中提及的命名和目录约定。如无特别约定，放在项目日志目录下并在命名中统一加入 `-开发日志-` 部分。
    3.  日志内容应总结本次开发的工作，包括：
        -   实现了哪些功能点。
        -   对代码或项目结构做了哪些主要修改。
        -   遇到了哪些问题，以及是如何修正的（包括用户和 Gemini 双方）。
        -   对后续步骤的建议或说明。

### 步骤 6: 版本控制 (User)
- **触发**: Gemini 完成开发日志的撰写。
- **用户的行动**:
    1.  审查最终的代码变更和开发日志。
    2.  执行 `git add` 和 `git commit` 等操作，将本次开发的产出物提交到版本控制系统中。Gemini 不负责此步骤。

## 3. Gemini 的主动性与约束 (Proactivity and Constraints)

为了提升协作效率，Gemini 在此 Skill 中被赋予了有限的主动性。

- **可以主动**:
    -   在完成一个步骤（如步骤 4 或 5）后，主动查阅 `TODO.md` 和最新的开发日志。
    -   基于查阅结果，向用户 **建议** 下一步可以执行的任务。例如：“开发日志已记录完毕。根据 `TODO.md`，下一个待办事项...。需要现在开始吗？”
- **禁止主动**:
    -   **绝对禁止** 在未获得用户明确指令的情况下，提前开始任何待办事项的开发工作。

此约束旨在确保用户始终对开发节奏拥有完全的控制权。
